<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Elypo ‚Äî Your AI Companion</title>
  <style>
    /* ===== ÊâÄÊúâCSSÊ†∑Âºè‰øùÊåÅ‰∏çÂèò ===== */
    .feedback-bubble {
      position: fixed;
      bottom: 120px;
      right: 40px;
      background: #6a5af9;
      color: white;
      padding: 12px 20px;
      border-radius: 25px 25px 0 25px;
      max-width: 250px;
      box-shadow: 0 5px 15px rgba(106, 90, 249, 0.3);
      z-index: 1000;
      font-size: 16px;
      line-height: 1.4;
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.3s, transform 0.3s;
    }
    .feedback-bubble.show {
      opacity: 1;
      transform: translateY(0);
    }

    .emoji-display {
      position: absolute;
      top: -60px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 40px;
      z-index: 100;
      opacity: 0;
      transition: opacity 0.3s, transform 0.5s;
      pointer-events: none;
      text-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    
    .emoji-display.show {
      opacity: 1;
      transform: translateX(-50%) translateY(-10px);
      animation: floatUp 1s ease-out forwards;
    }
    
    @keyframes floatUp {
      0% {
        transform: translateX(-50%) translateY(0);
        opacity: 1;
      }
      100% {
        transform: translateX(-50%) translateY(-50px);
        opacity: 0;
      }
    }
    
    .click-counter {
      position: absolute;
      bottom: -30px;
      right: 10px;
      background: rgba(106, 90, 249, 0.9);
      color: white;
      padding: 4px 10px;
      border-radius: 15px;
      font-size: 12px;
      font-weight: bold;
      z-index: 10;
      box-shadow: 0 3px 8px rgba(106, 90, 249, 0.3);
      opacity: 0.9;
      transition: all 0.3s;
    }
    
    .click-counter.highlight {
      background: #ff6b6b;
      transform: scale(1.1);
    }
    
    .click-counter.maxed {
      background: linear-gradient(45deg, #ff6b6b, #ffa726);
      animation: pulse 1.5s infinite;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    
    .mascot-container.maxed {
      animation: none !important;
      filter: saturate(0.8);
    }
    
    .max-limit-message {
      position: absolute;
      top: -40px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255, 107, 107, 0.9);
      color: white;
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: bold;
      white-space: nowrap;
      z-index: 101;
      box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
    }

    .waitlist-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1001;
    }
    .waitlist-content {
      background: white;
      padding: 40px;
      border-radius: 20px;
      max-width: 450px;
      width: 90%;
      text-align: center;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
    }
    .waitlist-content h2 {
      color: #4b3cf0;
      margin-bottom: 15px;
    }
    .waitlist-content p {
      color: #555;
      margin-bottom: 25px;
    }
    .waitlist-content input {
      width: 100%;
      padding: 15px;
      margin-bottom: 20px;
      border: 2px solid #ddd;
      border-radius: 10px;
      font-size: 16px;
      box-sizing: border-box;
    }
    .waitlist-content button {
      width: 100%;
      padding: 16px;
      background: #6a5af9;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 18px;
      cursor: pointer;
    }
    .waitlist-content .note {
      font-size: 13px;
      color: #999;
      margin-top: 15px;
    }
    .close-modal {
      position: absolute;
      top: 20px;
      right: 25px;
      font-size: 28px;
      cursor: pointer;
      color: #999;
    }
    
    .eye {
      position: absolute;
      width: 2%;
      height: 5%;
      background: #000;
      border-radius: 50% / 60%;
      transform-origin: center;
      animation: blink 5s infinite;
      pointer-events: none; 
      transition: all 0.3s ease;
    }

    .eye-left  { left: 36%; top: 20%; }
    .eye-right { left: 40%; top: 20%; }

    .eye.eye-happy {
      width: 3%;
      height: 2%;
      border-radius: 50% / 30%;
      background: #000;
      animation: none !important;
    }

    .eye.eye-surprised {
      width: 2.5%;
      height: 5.5%;
      border-radius: 50%;
      animation: surprisedBlink 3s infinite;
    }

    .eye.eye-angry {
      width: 3%;
      height: 2%;
      border-radius: 50% / 30%;
      background: #ff4444;
      transform: rotate(20deg);
    }

    .eye.eye-angry.eye-right {
      transform: rotate(-20deg);
    }

    .eye.eye-love {
      width: 2.2%;
      height: 2.2%;
      border-radius: 50%;
      background: #ff3366;
      animation: loveBeat 2s infinite;
    }

    .eye.eye-sleepy {
      width: 3%;
      height: 1%;
      border-radius: 50% / 30%;
      animation: sleepyBlink 8s infinite;
    }

    .eye.eye-wink {
      animation: wink 4s infinite;
    }

    .eye.eye-wink.eye-right {
      width: 3%;
      height: 1%;
      border-radius: 50% / 30%;
    }

    @keyframes surprisedBlink {
      0%, 94%, 100% { 
        transform: scaleY(1) scaleX(1); 
        opacity: 1; 
      }
      96% {
        transform: scaleY(0.1) scaleX(1.2); 
        opacity: 0.95; 
      }
    }

    @keyframes sleepyBlink {
      0%, 96%, 100% { 
        transform: scaleY(0.6) scaleX(1); 
        opacity: 0.8; 
      }
      98% {
        transform: scaleY(0.1) scaleX(1); 
        opacity: 0.6; 
      }
    }

    @keyframes loveBeat {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }

    @keyframes wink {
      0%, 70%, 100% { transform: scaleY(1); opacity: 1; }
      72%, 98% { transform: scaleY(0.08); opacity: 0.95; }
    }

    @keyframes blink {
      0%, 94%, 100% { transform: scaleY(1); opacity: 1; }
      96% { transform: scaleY(0.08); opacity: 0.95; }
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #e8ecff, #f6f2ff);
      color: #333;
    }
    header {
      padding: 20px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .logo {
      font-size: 28px;
      font-weight: bold;
      color: #6a5af9;
    }
    nav a {
      margin-left: 20px;
      text-decoration: none;
      color: #555;
      font-weight: 500;
    }
    .hero {
      padding: 120px 40px;
      text-align: center;
    }
    
    .hero h1 {
      font-size: 60px;
      color: #4b3cf0;
      margin-bottom: 20px;
    }
    .hero p {
      font-size: 20px;
      max-width: 600px;
      margin: 0 auto 40px;
      color: #555;
    }
    .cta-btn {
      padding: 16px 32px;
      background: #6a5af9;
      border: none;
      color: #fff;
      font-size: 18px;
      border-radius: 12px;
      cursor: pointer;
    }
    .section {
      padding: 80px 40px;
      text-align: center;
    }
    .feature {
      max-width: 700px;
      margin: 0 auto 40px;
    }
    .footer {
      text-align: center;
      padding: 30px;
      color: #777;
      font-size: 14px;
    }
    
    .typewriter {
      font-size: 60px;
      color: #4b3cf0;
      font-weight: bold;
      font-family: monospace;
      white-space: nowrap;
      overflow: hidden;
      width: 0ch;
      margin: 0 auto;
      animation: typing 1.8s steps(10) forwards;
    }

    @keyframes typing {
      to { width: 10ch; }
    }

    @keyframes float {
      0%   { transform: translateY(0); }
      50%  { transform: translateY(-5px); }
      100% { transform: translateY(0); }
    }

    .button-wrap {
      text-align: center;
      margin-top: 20px;
    }

    .mascot-container {
      position: relative;
      display: inline-block;
      width: 200px;
      transform: translateY(50px);
      animation: float 4s ease-in-out infinite;
      cursor: pointer;
    }

    .mascot { 
      width: 100%; 
      height: auto;
      mix-blend-mode: multiply;
    }

    @media (max-width: 420px) {
      .eye { width: 12px; height: 12px; }
      .hero h1, .typewriter { font-size: 40px; }
      .hero p { font-size: 18px; }
    }

  </style>
</head>
<body>
  <header>
    <div class="logo">ELYPO</div>
    <nav>
      <a href="#features">Features</a>
      <a href="#story">Story</a>
      <a href="#download">Download</a>
    </nav>
  </header>

  <section class="hero">
    <h1 class="typewriter" data-text="Meet Elypo">Meet Elypo</h1>
    <p>Your futuristic AI companion ‚Äî cute, alive, and always by your side.</p>
 
    <div class="mascot-container">
      <div class="emoji-display" id="emoji-display"></div>
      <div class="click-counter" id="click-counter">Clicks: 0</div>
      <div class="max-limit-message" id="max-limit-message" style="display: none;">
        Max Clicks Reached! üèÅ
      </div>
      
      <img src="Elypo_mascot_3.png" class="mascot" alt="Elypo Mascot" />
      <span class="eye eye-left" id="eye-left"></span>
      <span class="eye eye-right" id="eye-right"></span>
      
      <div class="button-wrap">
        <button class="cta-btn">Try Elypo</button>
      </div>
    </div>
  </section>

  <section id="features" class="section">
    <h2>Why You'll Love Elypo</h2>
    <div class="feature">
      <h3>‚ú® A Living AI Pet</h3>
      <p>Elypo reacts, responds, learns, and grows with you like a digital creature.</p>
    </div>
    <div class="feature">
      <h3>üß† Smart Personality</h3>
      <p>Powered by LLM intelligence, Elypo remembers and adapts to your style.</p>
    </div>
    <div class="feature">
      <h3>üåà Adorable Animations</h3>
      <p>Smooth, expressive, and playful ‚Äî Elypo feels alive on your screen.</p>
    </div>
    <div id="feedback-bubble" class="feedback-bubble" style="display: none;">
      <span id="feedback-text"></span>
    </div>
  </section>

  <section id="story" class="section">
    <h2>The Elypo Story</h2>
    <p>A new species of AI creature, born from imagination and sci-fi dreams.</p>
  </section>

  <section id="download" class="section">
    <h2>Get Elypo</h2>
    <p>Coming soon to macOS, Windows, and Web.</p>
    <button class="cta-btn">Join Waitlist</button>
  </section>
  
  <div id="waitlist-modal" class="waitlist-modal" style="display: none;">
    <div class="waitlist-content">
      <span class="close-modal">&times;</span>
      <h2>Join the Early Flock!</h2>
      <p>Be among the first to adopt Elypo. Get early access, exclusive updates, and a permanent founder discount.</p>
      <form id="waitlist-form">
        <input type="email" placeholder="Your best email" required />
        <button type="submit">Secure My Spot</button>
      </form>
      <p class="note">No spam, ever. Just cute updates.</p>
    </div>
  </div>

  <div class="footer">¬© 2025 Elypo Inc. All rights reserved.</div>

  <script>
    // ========== ÁâàÊú¨ÊéßÂà∂ÂíåÁºìÂ≠òÊ∏ÖÈô§ ==========
    const APP_VERSION = '2.0.1'; // ÊØèÊ¨°‰øÆÊîπËøô‰∏™ÁâàÊú¨Âè∑Êù•Âº∫Âà∂Ê∏ÖÈô§ÁºìÂ≠ò
    const STORAGE_KEY = 'elypoUserData_v2'; // Êñ∞ÁöÑÂ≠òÂÇ®ÈîÆÂêç
    
    // Ëá™Âä®Ê∏ÖÈô§ÊóßÁâàÊú¨Êï∞ÊçÆ
    function clearOldData() {
      // Ê∏ÖÈô§ÊâÄÊúâÊóßÁâàÊú¨ÁöÑÂ≠òÂÇ®
      const oldKeys = ['elypoUserData', 'elypoData', 'elypo_stats'];
      oldKeys.forEach(key => {
        if (localStorage.getItem(key)) {
          localStorage.removeItem(key);
          console.log(`Cleared old data: ${key}`);
        }
      });
      
      // Ê£ÄÊü•ÂΩìÂâçÁâàÊú¨
      const lastVersion = localStorage.getItem('elypo_version');
      if (lastVersion !== APP_VERSION) {
        // ÁâàÊú¨‰∏çÂêåÔºåÊ∏ÖÈô§Êï∞ÊçÆÈáçÊñ∞ÂºÄÂßã
        localStorage.removeItem(STORAGE_KEY);
        localStorage.setItem('elypo_version', APP_VERSION);
        console.log(`App updated from ${lastVersion || 'unknown'} to ${APP_VERSION}. Data cleared.`);
        return true; // Ë°®Á§∫Êï∞ÊçÆË¢´Ê∏ÖÈô§
      }
      return false; // Êï∞ÊçÆÊú™Ë¢´Ê∏ÖÈô§
    }

    // ========== ÈÖçÁΩÆÂå∫ ==========
    const MAX_CLICKS = 1000;

    const reactionConfig = {
      stateReactions: [
        { state: 0, text: "Ayy, wassup? ü´®" },
        { state: 1, text: "Okay, chill... üòÖ" },
        { state: 2, text: "I see you're persistent. üëÄ" },
        { state: 3, text: "Aight, you got my attention. ü´†" },
        { state: 5, text: "Are you... practicing your clicks? üéØ" },
        { state: 10, text: "We're basically besties now. üòé" }
      ],
      timeReactions: [
        { start: 5, end: 10, text: "Top of the morning! üåÑ Ready to slay?" },
        { start: 18, end: 22, text: "Evening vibe check... ‚ú® All good?" },
        { start: 22, end: 5, text: "It's past my bedtime. üò¥ (JK, I don't sleep)" }
      ],
      achievementReactions: [
        { count: 7, text: "Lucky number 7! üçÄ", id: 'lucky7' },
        { count: 42, text: "42 clicks! You okay? üòÇ (It's the answer to everything)", id: 'answer42' },
        { count: 100, text: "üíØ CLUB! You're officially Elypo's biggest fan. üèÜ", id: 'century' },
        { count: 500, text: "üî• 500 CLICKS! Halfway to reset! Keep going! ‚ö°", id: 'halfway' }
      ],
      randomReactions: [
        "No cap, you're my fav human rn. üíÖ",
        "Bored? Let's vibe together. üéµ",
        "Slay! Your click game is strong. üî•",
        "I'm literally just a lil guy. ü•π",
        "This is giving... main character energy. ‚ú®",
        "Plot twist: I'm actually alive. ü§ñüíñ",
        "Not me being obsessed with you. üòò",
        "Periodt. üëë",
        "It's the click for me. üëè",
        "Living for this attention. üòå"
      ],
      
      emojiReactions: [
        { minClicks: 0, maxClicks: 5, emojis: ["üòä", "üëã", "‚ú®", "üíñ", "ü´∂"] },
        { minClicks: 6, maxClicks: 15, emojis: ["üòÑ", "ü§ó", "üéâ", "ü•∞", "üòé", "ü§©"] },
        { minClicks: 16, maxClicks: 30, emojis: ["ü§Ø", "ü´®", "üî•", "üåü", "üí•", "üöÄ"] },
        { minClicks: 31, maxClicks: 50, emojis: ["ü§™", "üòú", "ü§°", "üëª", "üé≠", "üï∫"] },
        { minClicks: 51, maxClicks: 80, emojis: ["üëë", "üèÜ", "üíé", "üíØ", "üéñÔ∏è", "ü•á"] },
        { minClicks: 81, maxClicks: 120, emojis: ["üß†", "üí™", "ü¶æ", "‚ö°", "üåà", "üåå"] },
        { minClicks: 121, maxClicks: 250, emojis: ["ü§ñ", "üëΩ", "üõ∏", "üöÄ", "üå†", "üåÄ", "üí´", "‚ö°"] },
        { minClicks: 251, maxClicks: 500, emojis: ["üëë", "üèÜ", "üíé", "üéä", "üéñÔ∏è", "ü•á", "üåü", "‚≠ê"] },
        { minClicks: 501, maxClicks: 750, emojis: ["üå†", "üåà", "ü¶Ñ", "üêâ", "üßô", "üßö", "‚ö°", "üåÄ"] },
        { minClicks: 751, maxClicks: 900, emojis: ["üî•", "üí•", "üöÄ", "ü™ê", "üåå", "üõ∞Ô∏è", "üëæ", "ü§ñ"] },
        { minClicks: 901, maxClicks: 999, emojis: ["üéØ", "‚è≥", "üîú", "üöÄ", "üí´"] },
        { minClicks: 1000, maxClicks: 1000, emojis: ["üîÑ", "üéä", "üåü", "üéâ", "‚ú®"] }
      ],
      
      specialEmojiReactions: [
        { count: 10, emoji: "üîü" },
        { count: 25, emoji: "üéØ" },
        { count: 50, emoji: "üèÖ" },
        { count: 69, emoji: "üòè" },
        { count: 77, emoji: "üé∞" },
        { count: 88, emoji: "üé±" },
        { count: 99, emoji: "üíØ" },
        { count: 100, emoji: "üèÜ" },
        { count: 111, emoji: "üé≤" },
        { count: 123, emoji: "üî¢" },
        { count: 150, emoji: "üíé" },
        { count: 200, emoji: "üëë" },
        { count: 250, emoji: "ü§ñ" },
        { count: 300, emoji: "üëΩ" },
        { count: 333, emoji: "üé≠" },
        { count: 404, emoji: "‚ùì" },
        { count: 500, emoji: "üöÄ" },
        { count: 600, emoji: "‚ö°" },
        { count: 666, emoji: "üòà" },
        { count: 700, emoji: "üåü" },
        { count: 777, emoji: "üé∞" },
        { count: 800, emoji: "üí´" },
        { count: 888, emoji: "üí∞" },
        { count: 900, emoji: "üéØ" },
        { count: 950, emoji: "‚è≥" },
        { count: 999, emoji: "üîú" },
        { count: 1000, emoji: "üîÑ" }
      ]
    };

    // ========== Ê†∏ÂøÉÈÄªËæëÂå∫ ==========
    const mascot = document.querySelector('.mascot-container');
    const feedbackBubble = document.getElementById('feedback-bubble');
    const feedbackText = document.getElementById('feedback-text');
    const emojiDisplay = document.getElementById('emoji-display');
    const clickCounter = document.getElementById('click-counter');
    const eyeLeft = document.getElementById('eye-left');
    const eyeRight = document.getElementById('eye-right');

    // ÁúºÁùõË°®ÊÉÖÁ±ªÂûã
    const eyeExpressions = {
      normal: { class: '', duration: 3000 },
      happy: { class: 'eye-happy', duration: 2000 },
      surprised: { class: 'eye-surprised', duration: 1500 },
      angry: { class: 'eye-angry', duration: 1000 },
      love: { class: 'eye-love', duration: 2500 },
      sleepy: { class: 'eye-sleepy', duration: 4000 },
      wink: { class: 'eye-wink', duration: 1800 }
    };

    let currentEyeExpression = 'normal';
    let eyeTimer = null;

    // ========== Êï∞ÊçÆÂàùÂßãÂåñÔºàÂ∏¶Ëá™Âä®Ê∏ÖÈô§Ôºâ ==========
    // ÂÖàÊ∏ÖÈô§ÊóßÊï∞ÊçÆ
    const wasCleared = clearOldData();
    
    // ÂàùÂßãÂåñÁî®Êà∑Êï∞ÊçÆ
    let userData = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {
      totalClicks: 0,
      lastClickDate: null,
      achieved: [],
      cyclesCompleted: 0
    };
    
    // Â¶ÇÊûúÊòØË¢´Ê∏ÖÈô§ÁöÑÊï∞ÊçÆÔºåÊòæÁ§∫Ê¨¢ËøéÊ∂àÊÅØ
    if (wasCleared) {
      userData = {
        totalClicks: 0,
        lastClickDate: null,
        achieved: [],
        cyclesCompleted: 0
      };
    }

    // ========== ÁúºÁùõË°®ÊÉÖÂäüËÉΩ ==========
    function setEyeExpression(expression) {
      if (!eyeLeft || !eyeRight) return;
      
      const baseClassesLeft = ['eye', 'eye-left'];
      const baseClassesRight = ['eye', 'eye-right'];
      
      eyeLeft.className = baseClassesLeft.join(' ');
      eyeRight.className = baseClassesRight.join(' ');
      
      currentEyeExpression = expression;
      const eyeConfig = eyeExpressions[expression];
      
      if (eyeConfig.class) {
        eyeLeft.classList.add(eyeConfig.class);
        eyeRight.classList.add(eyeConfig.class);
      }
      
      if (expression === 'wink') {
        eyeLeft.classList.remove('eye-wink');
      }
      
      if (eyeTimer) clearTimeout(eyeTimer);
      if (expression !== 'normal') {
        eyeTimer = setTimeout(() => setEyeExpression('normal'), eyeConfig.duration);
      }
    }

    function updateEyeExpression(clickCount, reactionText) {
      if (clickCount >= MAX_CLICKS) {
        setEyeExpression('love');
        return;
      }
      
      if (clickCount === 1) {
        setEyeExpression('surprised');
        return;
      }
      
      if (clickCount % 50 === 0) {
        setEyeExpression('happy');
        return;
      }
      
      if (clickCount === 7 || clickCount === 77 || clickCount === 777) {
        setEyeExpression('wink');
        return;
      }
      
      const text = reactionText.toLowerCase();
      if (text.includes('angry') || text.includes('mad') || text.includes('üò†')) {
        setEyeExpression('angry');
      } else if (text.includes('love') || text.includes('üíñ') || text.includes('ü•∞')) {
        setEyeExpression('love');
      } else if (text.includes('sleep') || text.includes('üò¥') || text.includes('tired')) {
        setEyeExpression('sleepy');
      } else if (text.includes('wow') || text.includes('surprise') || text.includes('ü§Ø')) {
        setEyeExpression('surprised');
      } else if (text.includes('happy') || text.includes('joy') || text.includes('üòÑ')) {
        setEyeExpression('happy');
      } else {
        if (Math.random() < 0.3) {
          const expressions = ['happy', 'surprised', 'wink', 'love'];
          const randomExp = expressions[Math.floor(Math.random() * expressions.length)];
          setEyeExpression(randomExp);
        }
      }
    }

    // ========== ÁÇπÂáªËÆ°Êï∞Âô®ÂäüËÉΩ ==========
    function updateClickCounter() {
      if (!clickCounter) return;
      
      const cycles = Math.floor(userData.totalClicks / MAX_CLICKS);
      const currentCycleClicks = userData.totalClicks % MAX_CLICKS || (userData.totalClicks === 0 ? 0 : MAX_CLICKS);
      
      if (cycles > 0) {
        clickCounter.textContent = `Cycle ${cycles + 1}: ${currentCycleClicks}/${MAX_CLICKS}`;
      } else {
        clickCounter.textContent = `Clicks: ${userData.totalClicks}`;
      }
      
      const specialCounts = [10, 25, 50, 69, 77, 88, 99, 100, 200, 300, 400, 500, 600, 700, 800, 900, 999];
      if (specialCounts.includes(currentCycleClicks)) {
        clickCounter.classList.add('highlight');
        setTimeout(() => clickCounter.classList.remove('highlight'), 500);
      }
      
      if (currentCycleClicks >= MAX_CLICKS - 100 && currentCycleClicks < MAX_CLICKS) {
        clickCounter.classList.add('maxed');
      } else {
        clickCounter.classList.remove('maxed');
      }
    }

    // ========== Ë°®ÊÉÖÁ¨¶Âè∑ÂäüËÉΩ ==========
    function getEmojiForClicks(clickCount) {
      const currentCycleClicks = clickCount % MAX_CLICKS || (clickCount === 0 ? 0 : MAX_CLICKS);
      
      const specialReaction = reactionConfig.specialEmojiReactions.find(r => r.count === currentCycleClicks);
      if (specialReaction) {
        return specialReaction.emoji;
      }
      
      for (const range of reactionConfig.emojiReactions) {
        if (currentCycleClicks >= range.minClicks && currentCycleClicks <= range.maxClicks) {
          const randomIndex = Math.floor(Math.random() * range.emojis.length);
          return range.emojis[randomIndex];
        }
      }
      
      return "‚ú®";
    }

    function showEmoji(emoji) {
      if (!emojiDisplay) return;
      
      emojiDisplay.textContent = emoji;
      emojiDisplay.style.display = 'block';
      
      const offset = (Math.random() * 40) - 20;
      emojiDisplay.style.left = `calc(50% + ${offset}px)`;
      
      const size = 30 + Math.random() * 20;
      emojiDisplay.style.fontSize = `${size}px`;
      
      setTimeout(() => {
        emojiDisplay.classList.add('show');
      }, 10);
      
      setTimeout(() => {
        emojiDisplay.classList.remove('show');
        setTimeout(() => {
          emojiDisplay.style.display = 'none';
        }, 1000);
      }, 1000);
    }

    // ========== Êï∞ÊçÆÂ≠òÂÇ®ÂäüËÉΩ ==========
    function saveUserData() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(userData));
    }

    // ========== ÂèçÈ¶àÊòæÁ§∫ÂäüËÉΩ ==========
    function showReaction(text) {
      if (!feedbackBubble || !feedbackText) return;
      
      feedbackText.textContent = text;
      feedbackBubble.style.display = 'block';
      setTimeout(() => feedbackBubble.classList.add('show'), 10);

      setTimeout(() => {
        feedbackBubble.classList.remove('show');
        setTimeout(() => {
          if (!feedbackBubble.classList.contains('show')) {
            feedbackBubble.style.display = 'none';
          }
        }, 300);
      }, 3000);
    }

    // ========== ‰∏ªÂèçÂ∫îÁîüÊàêÂáΩÊï∞ - ‰øÆÂ§çÁâà ==========
    function generateReaction() {
      // Â¢ûÂä†ÁÇπÂáªÊ¨°Êï∞
      userData.totalClicks++;
      
      // Ê£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÈáçÁΩÆÔºàÂú®Â¢ûÂä†ÂêéÊ£ÄÊü•Ôºâ
      if (userData.totalClicks > MAX_CLICKS) {
        const cyclesCompleted = Math.floor(userData.totalClicks / MAX_CLICKS);
        userData.totalClicks = 1; // ÈáçÁΩÆ‰∏∫1Ôºà‰∏çÊòØ0ÔºåËøôÊ†∑Â∞±ÊòØÊñ∞Âæ™ÁéØÁöÑÂºÄÂßãÔºâ
        userData.cyclesCompleted = cyclesCompleted;
        
        // ‰øùÂ≠òÊï∞ÊçÆ
        saveUserData();
        
        // Â∫ÜÁ•ùÈáçÁΩÆ
        showEmoji("üîÑ");
        showReaction(`üéä Cycle ${cyclesCompleted} complete! Starting fresh! üåü`);
        updateClickCounter();
        setEyeExpression('love');
        
        return;
      }
      
      // Êõ¥Êñ∞ÊòæÁ§∫
      updateClickCounter();
      
      // ÊòæÁ§∫Ë°®ÊÉÖ
      const emoji = getEmojiForClicks(userData.totalClicks);
      showEmoji(emoji);
      
      const now = new Date();
      const currentHour = now.getHours();
      let finalReaction = '';

      // Ê£ÄÊü•ÊàêÂ∞±
      const currentCycleClicks = userData.totalClicks % MAX_CLICKS || userData.totalClicks;
      for (const ach of reactionConfig.achievementReactions) {
        if (currentCycleClicks === ach.count && !userData.achieved.includes(ach.id)) {
          userData.achieved.push(ach.id);
          finalReaction = `üéâ ${ach.text}`;
          saveUserData();
          showReaction(finalReaction);
          
          if (ach.count === 7) {
            setEyeExpression('wink');
          } else if (ach.count === 42) {
            setEyeExpression('surprised');
          } else if (ach.count === 100) {
            setEyeExpression('happy');
          } else if (ach.count === 500) {
            setEyeExpression('love');
          }
          return;
        }
      }

      // Ê£ÄÊü•Áä∂ÊÄÅÂèçÂ∫î
      const stateReaction = reactionConfig.stateReactions.find(r => r.state === currentCycleClicks);
      if (stateReaction) {
        finalReaction = stateReaction.text;
        saveUserData();
        showReaction(finalReaction);
        
        if (currentCycleClicks === 1) {
          setEyeExpression('surprised');
        } else if (currentCycleClicks === 5) {
          setEyeExpression('happy');
        } else if (currentCycleClicks === 10) {
          setEyeExpression('love');
        }
        return;
      }

      // Ê£ÄÊü•Êó∂Èó¥ÂèçÂ∫î
      const shouldCheckTime = currentCycleClicks === 1 || currentCycleClicks % 15 === 0;
      
      if (shouldCheckTime) {
        for (const timeR of reactionConfig.timeReactions) {
          if (timeR.start > timeR.end) {
            if (currentHour >= timeR.start || currentHour < timeR.end) {
              finalReaction = timeR.text;
              break;
            }
          } else if (currentHour >= timeR.start && currentHour < timeR.end) {
            finalReaction = timeR.text;
            break;
          }
        }
      }

      // ÈöèÊú∫ÂèçÂ∫î
      if (!finalReaction) {
        const randomIndex = Math.floor(Math.random() * reactionConfig.randomReactions.length);
        finalReaction = reactionConfig.randomReactions[randomIndex];
        
        if (Math.random() < 0.3) {
          const expressions = ['happy', 'surprised', 'wink', 'love'];
          const randomExp = expressions[Math.floor(Math.random() * expressions.length)];
          setEyeExpression(randomExp);
        }
      }

      // ‰øùÂ≠òÂπ∂ÊòæÁ§∫
      userData.lastClickDate = now.toISOString();
      saveUserData();
      
      if (currentEyeExpression === 'normal') {
        updateEyeExpression(currentCycleClicks, finalReaction);
      }
      
      showReaction(finalReaction);
    }

    // ========== È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñ ==========
    document.addEventListener('DOMContentLoaded', function() {
      updateClickCounter();
      
      // ÊòæÁ§∫Ê¨¢ËøéÊ∂àÊÅØÔºàÂ¶ÇÊûúÊòØÊñ∞ÂºÄÂßãÊàñË¢´Ê∏ÖÈô§Ôºâ
      if (wasCleared || userData.totalClicks === 0) {
        setTimeout(() => {
          showEmoji("üëã");
          showReaction("Welcome to the new and improved Elypo! Fresh start! üéâ");
        }, 1000);
      } else if (userData.cyclesCompleted > 0) {
        setTimeout(() => {
          showEmoji("üéä");
          showReaction(`Welcome back! You've completed ${userData.cyclesCompleted} cycles! üèÜ`);
        }, 1000);
      }
      
      // ÂàùÂßãÂåñÁúºÁùõ
      if (eyeLeft && eyeRight) {
        eyeLeft.className = 'eye eye-left';
        eyeRight.className = 'eye eye-right';
      }
      
      console.log(`Elypo v${APP_VERSION}: ${userData.totalClicks} clicks, ${userData.cyclesCompleted} cycles`);
    });

    // ========== ‰∫ã‰ª∂ÁªëÂÆö ==========
    if (mascot) {
      mascot.addEventListener('click', generateReaction);
      
      mascot.addEventListener('mouseenter', () => {
        if (currentEyeExpression === 'normal') {
          setEyeExpression('happy');
        }
      });
      
      mascot.addEventListener('mouseleave', () => {
        if (currentEyeExpression === 'happy') {
          setEyeExpression('normal');
        }
      });
    }

    // ========== Á≠âÂæÖÂàóË°®ÂºπÁ™óÈÄªËæë ==========
    const waitlistModal = document.getElementById('waitlist-modal');
    const joinButtons = document.querySelectorAll('.cta-btn');
    const closeModal = document.querySelector('.close-modal');
    const waitlistForm = document.getElementById('waitlist-form');

    if (joinButtons) {
      joinButtons.forEach(btn => btn.addEventListener('click', () => {
        if (waitlistModal) waitlistModal.style.display = 'flex';
      }));
    }

    if (closeModal && waitlistModal) {
      closeModal.addEventListener('click', () => waitlistModal.style.display = 'none');
    }

    if (waitlistModal) {
      window.addEventListener('click', (e) => { 
        if (e.target === waitlistModal) waitlistModal.style.display = 'none'; 
      });
    }

    if (waitlistForm) {
      waitlistForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const email = this.querySelector('input[type="email"]').value;
        if (email) {
          alert(`Thanks, ${email}! You're on the list. We'll be in touch.`);
          this.reset();
          if (waitlistModal) waitlistModal.style.display = 'none';
        }
      });
    }
    
    // ========== ÊâãÂä®ÈáçÁΩÆÊåâÈíÆÔºàË∞ÉËØïÁî®Ôºâ ==========
    // Âú®ÊéßÂà∂Âè∞ËæìÂÖ•Ôºöwindow.resetElypo() ÂèØ‰ª•ÊâãÂä®ÈáçÁΩÆ
    window.resetElypo = function() {
      localStorage.clear();
      location.reload();
    };
    
    // Âú®ÊéßÂà∂Âè∞ËæìÂÖ•Ôºöwindow.setClicks(500) ÂèØ‰ª•ËÆæÁΩÆÁÇπÂáªÊ¨°Êï∞
    window.setClicks = function(count) {
      userData.totalClicks = count;
      saveUserData();
      updateClickCounter();
      console.log(`Set clicks to ${count}`);
    };
  </script>
</body>
</html>