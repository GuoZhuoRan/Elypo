<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Elypo Waitlist Admin</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }
    
    header {
      text-align: center;
      margin-bottom: 40px;
      padding-bottom: 30px;
      border-bottom: 3px solid #6a5af9;
    }
    
    h1 {
      font-size: 2.5em;
      color: #4b3cf0;
      margin: 0 0 10px 0;
    }
    
    .subtitle {
      color: #666;
      font-size: 1.1em;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }
    
    .stat-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      border-radius: 15px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
    }
    
    .stat-value {
      font-size: 3em;
      font-weight: bold;
      margin-bottom: 10px;
    }
    
    .stat-label {
      font-size: 1em;
      opacity: 0.9;
    }
    
    .controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      gap: 15px;
      flex-wrap: wrap;
    }
    
    .search-box {
      flex: 1;
      min-width: 250px;
    }
    
    .search-box input {
      width: 100%;
      padding: 12px 20px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 16px;
      transition: all 0.3s;
    }
    
    .search-box input:focus {
      outline: none;
      border-color: #6a5af9;
      box-shadow: 0 0 0 3px rgba(106, 90, 249, 0.1);
    }
    
    .btn {
      padding: 12px 24px;
      background: #6a5af9;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      white-space: nowrap;
    }
    
    .btn:hover {
      background: #5a4ae9;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(106, 90, 249, 0.3);
    }
    
    .btn-secondary {
      background: white;
      color: #6a5af9;
      border: 2px solid #6a5af9;
    }
    
    .btn-secondary:hover {
      background: #f0f0ff;
    }
    
    .users-section {
      background: #f8f9ff;
      border-radius: 15px;
      padding: 30px;
    }
    
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
    }
    
    .section-title {
      font-size: 1.8em;
      color: #4b3cf0;
      margin: 0;
    }
    
    .user-list {
      display: grid;
      gap: 15px;
    }
    
    .user-card {
      background: white;
      padding: 20px;
      border-radius: 12px;
      border-left: 4px solid #6a5af9;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }
    
    .user-card:hover {
      transform: translateX(5px);
      box-shadow: 0 5px 20px rgba(106, 90, 249, 0.2);
    }
    
    .user-info {
      flex: 1;
    }
    
    .user-email {
      font-size: 1.1em;
      font-weight: 600;
      color: #333;
      margin-bottom: 5px;
    }
    
    .user-meta {
      display: flex;
      gap: 20px;
      font-size: 0.9em;
      color: #666;
    }
    
    .user-badge {
      display: inline-block;
      padding: 4px 12px;
      background: #e8f5e9;
      color: #2e7d32;
      border-radius: 20px;
      font-size: 0.85em;
      font-weight: 600;
    }
    
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #999;
    }
    
    .empty-icon {
      font-size: 4em;
      margin-bottom: 20px;
    }
    
    .empty-state h3 {
      color: #666;
      margin-bottom: 10px;
    }
    
    .empty-state p {
      color: #999;
    }
    
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 15px 25px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
      transform: translateX(400px);
      transition: transform 0.3s;
      z-index: 1000;
      border-left: 4px solid #4caf50;
    }
    
    .notification.show {
      transform: translateX(0);
    }
    
    .notification.error {
      border-left-color: #f44336;
    }
    
    footer {
      text-align: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 2px solid #e0e0e0;
      color: #999;
    }
    
    @media (max-width: 768px) {
      .container {
        padding: 20px;
      }
      
      h1 {
        font-size: 2em;
      }
      
      .stats-grid {
        grid-template-columns: 1fr;
      }
      
      .controls {
        flex-direction: column;
      }
      
      .search-box {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üêæ Elypo Waitlist</h1>
      <p class="subtitle">Desktop Pet Companion - Early Access</p>
    </header>
    
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-value" id="total-users">0</div>
        <div class="stat-label">Total Signups</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="today-users">0</div>
        <div class="stat-label">Today</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="this-week-users">0</div>
        <div class="stat-label">This Week</div>
      </div>
    </div>
    
    <div class="controls">
      <div class="search-box">
        <input type="text" id="search-input" placeholder="üîç Search by email...">
      </div>
      <button class="btn" onclick="refreshData()">üîÑ Refresh</button>
      <button class="btn btn-secondary" onclick="exportCSV()">üì• Export CSV</button>
      <button class="btn btn-secondary" onclick="clearAllData()">üóëÔ∏è Clear All</button>
    </div>
    
    <div class="users-section">
      <div class="section-header">
        <h2 class="section-title">Waitlist Members</h2>
        <span id="user-count-badge" class="user-badge">0 users</span>
      </div>
      <div id="user-list" class="user-list">
        <!-- Users will be loaded here -->
      </div>
    </div>
    
    <footer>
      <p>¬© 2025 Elypo Inc. | Your AI Desktop Pet Companion</p>
    </footer>
  </div>
  
  <div id="notification" class="notification"></div>
  
  <script>
    // Load and display users
    async function loadUsers() {
      const users = JSON.parse(localStorage.getItem('soulLabUsers')) || [];
      const userList = document.getElementById('user-list');
      const totalUsersEl = document.getElementById('total-users');
      const userCountBadge = document.getElementById('user-count-badge');
      
      // Update stats
      totalUsersEl.textContent = users.length;
      userCountBadge.textContent = `${users.length} user${users.length !== 1 ? 's' : ''}`;
      
      // Calculate today's signups
      const today = new Date().toDateString();
      const todayUsers = users.filter(u => {
        const userDate = new Date(u.createdAt).toDateString();
        return userDate === today;
      });
      document.getElementById('today-users').textContent = todayUsers.length;
      
      // Calculate this week's signups
      const weekAgo = new Date();
      weekAgo.setDate(weekAgo.getDate() - 7);
      const weekUsers = users.filter(u => new Date(u.createdAt) >= weekAgo);
      document.getElementById('this-week-users').textContent = weekUsers.length;
      
      // Display users
      if (users.length === 0) {
        userList.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">üì≠</div>
            <h3>No signups yet</h3>
            <p>Users who sign up on your landing page will appear here</p>
            <p style="margin-top: 20px; font-size: 0.9em;">
              <a href="index.html" style="color: #6a5af9;">Go to landing page</a> to test the signup
            </p>
          </div>
        `;
        return;
      }
      
      // Sort by newest first
      users.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
      
      userList.innerHTML = users.map((user, index) => `
        <div class="user-card">
          <div class="user-info">
            <div class="user-email">${user.email}</div>
            <div class="user-meta">
              <span>üìÖ ${formatDate(user.createdAt)}</span>
              <span>üïê ${formatTime(user.createdAt)}</span>
              <span>#{${users.length - index}}</span>
            </div>
          </div>
          <span class="user-badge">Waiting</span>
        </div>
      `).join('');
    }
    
    // Search functionality
    document.getElementById('search-input')?.addEventListener('input', function(e) {
      const searchTerm = e.target.value.toLowerCase();
      const users = JSON.parse(localStorage.getItem('soulLabUsers')) || [];
      
      if (!searchTerm) {
        loadUsers();
        return;
      }
      
      const filtered = users.filter(u => u.email.toLowerCase().includes(searchTerm));
      const userList = document.getElementById('user-list');
      
      if (filtered.length === 0) {
        userList.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">üîç</div>
            <h3>No results found</h3>
            <p>No users match "${searchTerm}"</p>
          </div>
        `;
        return;
      }
      
      filtered.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
      
      userList.innerHTML = filtered.map(user => `
        <div class="user-card">
          <div class="user-info">
            <div class="user-email">${user.email}</div>
            <div class="user-meta">
              <span>üìÖ ${formatDate(user.createdAt)}</span>
              <span>üïê ${formatTime(user.createdAt)}</span>
            </div>
          </div>
          <span class="user-badge">Waiting</span>
        </div>
      `).join('');
    });
    
    // Refresh data
    function refreshData() {
      loadUsers();
      showNotification('Data refreshed successfully!');
    }
    
    // Export to CSV
    function exportCSV() {
      const users = JSON.parse(localStorage.getItem('soulLabUsers')) || [];
      
      if (users.length === 0) {
        showNotification('No data to export', 'error');
        return;
      }
      
      const headers = ['Email', 'Signup Date', 'Signup Time', 'Status'];
      const rows = users.map(user => [
        user.email,
        formatDate(user.createdAt),
        formatTime(user.createdAt),
        'Waiting'
      ]);
      
      const csvContent = [headers, ...rows]
        .map(row => row.map(cell => `"${cell}"`).join(','))
        .join('\n');
      
      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
      const link = document.createElement('a');
      const url = URL.createObjectURL(blob);
      
      link.setAttribute('href', url);
      link.setAttribute('download', `elypo-waitlist-${new Date().toISOString().split('T')[0]}.csv`);
      link.style.visibility = 'hidden';
      
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      
      showNotification(`Exported ${users.length} users to CSV`);
    }
    
    // Clear all data
    function clearAllData() {
      if (!confirm('‚ö†Ô∏è Are you sure you want to delete ALL waitlist data? This cannot be undone!')) {
        return;
      }
      
      if (!confirm('This will permanently delete all ' + (JSON.parse(localStorage.getItem('soulLabUsers')) || []).length + ' users. Are you absolutely sure?')) {
        return;
      }
      
      localStorage.removeItem('soulLabUsers');
      localStorage.removeItem('registrationLogs');
      
      loadUsers();
      showNotification('All data cleared');
    }
    
    // Helper functions
    function formatDate(dateString) {
      if (!dateString) return 'Unknown';
      const date = new Date(dateString);
      return date.toLocaleDateString('en-US', { 
        year: 'numeric', 
        month: 'short', 
        day: 'numeric' 
      });
    }
    
    function formatTime(dateString) {
      if (!dateString) return 'Unknown';
      const date = new Date(dateString);
      return date.toLocaleTimeString('en-US', { 
        hour: '2-digit', 
        minute: '2-digit'
      });
    }
    
    function showNotification(message, type = 'success') {
      const notif = document.getElementById('notification');
      notif.textContent = message;
      notif.className = `notification ${type}`;
      notif.classList.add('show');
      
      setTimeout(() => {
        notif.classList.remove('show');
      }, 3000);
    }
    
    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      loadUsers();
      console.log('üìß Elypo Waitlist Admin loaded');
      console.log('Quick commands:');
      console.log('  refreshData()    - Reload user list');
      console.log('  exportCSV()      - Export to CSV');
      console.log('  clearAllData()   - Clear all users');
    });
  </script>
</body>
</html>
